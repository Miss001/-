# 主键设置
- 1.使用 SERIAL 数据类型 自增主键
```
CREATE TABLE tmp1 (
    user_id serial PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    price NUMERIC(10, 2) NOT NULL,
    createdtime TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

- 2.使用 自定义序列 自增主键
```
创建序列
CREATE SEQUENCE user_id_seq START WITH 1 INCREMENT BY 1 NOORDER CACHE 10000;
创建表
CREATE TABLE tmp1 (
    user_id INT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    price NUMERIC(10, 2) NOT NULL,
    createdtime TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO tmp1 VALUES(user_id_seq.NEXTVAL,'AZOONE',30,NOW());
```

- 3.uuid 主键
```
CREATE TABLE tmp1 (
    user_id varchar(36) PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    price NUMERIC(10, 2) NOT NULL,
    createdtime TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
CREATE TABLE tmp1 (
    user_id varchar(36) PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    price NUMERIC(10, 2) NOT NULL,
    createdtime TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
INSERT INTO tmp1 VALUES(uuid_short(),'AZOONE',30,NOW());
INSERT INTO tmp1 VALUES(uuid(),'AZOONE',30,NOW());

```

# 序列
```
# 创建序列
CREATE SEQUENCE seq_1 
START WITH 1 
INCREMENT BY 1 
NOORDER 
NOCYCLE 
CACHE 10000;

# 使用
SELECT seq_1.NEXTVAL;

# 查看当前序列值
SELECT seq_1.CURRVAL;
```

# 匿名块
```
BEGIN
    DECLARE v_user_id varchar;
    DECLARE cur_ CURSOR FOR SELECT user_id FROM tmp1;
    
    DECLARE done INT DEFAULT 0;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

    OPEN cur_;

    read_loop: LOOP
        FETCH cur_ INTO v_user_id;
        
        IF done THEN
            LEAVE read_loop;
        END IF;

        -- 动态 SQL 语句
        SET @v_sql = CONCAT('INSERT INTO tmp2 SELECT user_id FROM tmp1 WHERE user_id = ', v_user_id);

        -- 执行动态 SQL
        PREPARE stmt FROM @v_sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;

    END LOOP;

    CLOSE cur_;
END $$
```

# 自定义函数
```

```

# 存储过程
```

```

# 分区表
```

```
