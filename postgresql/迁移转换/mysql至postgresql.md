## 语法差异转换
|                                  | postgresql11                                                 | mysql8                                                       |
| -------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| group_concat                     | with<br/>t as(<br/>select 1 as i ,'a' as id<br/>union ALL<br/>select null as i,'a' as id<br/>union ALL<br/>select 2 as i,'b' as id<br/>union ALL<br/>select 3 as i,'b' as id<br/>)<br/>select string_agg(i::text,',' order by i)  from t  group by id | with<br/>t as(<br/>select 1 as i ,'a' as id<br/>union ALL<br/>select null as i,'a' as id<br/>union ALL<br/>select 2 as i,'b' as id<br/>union ALL<br/>select 3 as i,'b' as id<br/>)<br/>select group_concat(i SEPARATOR ',')  from t group by id |
| 尾部空格字符串（' '）            | 读取为空格字符串（' '）                                      | 当字符集排序规则的Pad_attribute='PAD SPACE'时，<br/>识别为：空字符串（''）,like 除外<br/>当字符集排序规则的Pad_attribute='NO PAD'时，<br/>识别为：空格字符串（' '） |
| uuid                             | select uuid_generate_v4()                                    | select uuid()                                                |
| ifnull                           | select coalesce(null,1)                                      | select ifnull(null,1)                                        |
| limit                            | select * from test limit 2 offset 0                          | select * from test limit 0,2                                 |
| if                               | SELECT   <br/>(CASE id     <br/>    WHEN 1 THEN '男'         <br/>   ELSE '女' END)<br/>FROM test | select if(id=1,'男','女') from test                          |
| str_to_date                      | select to_timestamp('2024-01-01 00:0:00','yyyy-mm-dd hh24:mi:ss') | select str_to_date('2024-01-01 00:0:00','%Y-%m-%d %H:%s:%i') |
| date_format                      | select to_char(current_timestamp,'yyyy-mm-dd hh24:mi:ss')    | select date_format(now(),'%Y-%m-%d %H:%s:%i')                |
| timestampdiff                    | select round(extract(EPOCH  from now() - to_timestamp('2024-01-01 00:00:00','yyyy-mm-dd hh24:mi:ss'))) | select timestampdiff(SECOND,str_to_date('2024-01-01 00:00:00','%Y-%m-%d %H:%s:%i'),now()) |
| interval                         | select now() + (1\|\|' day')::interval<br/>select now() + interval '1 DAY' | select  now() + interval 1 DAY                               |
| 伪劣排序                         | select row_number() over () as rowId from test               | select (@i:=@i+1) As rowId<br/>from test a,<br/>     (select @i := 0) b |
| replace into                     | insert into test (id,content)<br/>select 1,'tx'<br/>ON CONFLICT (id)<br/>DO UPDATE SET content = EXCLUDED.content | replace into test(id,content)<br/>select 1,'tx'              |
| insert … on duplicate key update | insert into test (id,content)<br/>select 1,'tx'<br/>ON CONFLICT (id)<br/>DO UPDATE SET content = EXCLUDED.content | INSERT INTO test (id, content) <br/>select * from(<br/>select 2 as id,'tx' as content<br/>)b<br/>ON DUPLICATE KEY <br/>UPDATE content=b.content |
| insert ignore                    | insert into test (id,content)<br/>select 3 ,'tx'<br/>ON CONFLICT (id)<br/>DO NOTHING | INSERT IGNORE INTO test(id, content) <br/>select 3 as id,'tx' as content |
| 多表关联更新                     | UPDATE <br/>    product p<br/>SET <br/>    net_price = p.price - p.price * s.discount,<br/>    segment_name=t.segment<br/>FROM <br/>    product_segment s,<br/>    segment t<br/>WHERE <br/>    p.segment_id = s.id<br/>    and s.segment=t.segment; | UPDATE <br/>    product p<br/>    JOIN product_segment s ON p.segment_id = s.id<br/>    JOIN segment t ON s.segment=t.segment<br/>SET <br/>    p.net_price = p.price - p.price * s.discount,<br/>    p.segment_name=t.segment |
